@model IEnumerable<BOROMOTORS.Models.DirtBike>
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager


    <!-- Създаване на нов мотор (само за админ) -->
    @if (SignInManager.IsSignedIn(User) && User.IsInRole("Admin"))
    {
        <div style="text-align: center; margin-bottom: 30px;">
            <a asp-action="Create" class="btn btn-outline-success">
                ➕ Създай нов мотор
            </a>
        </div>
    }

<!-- 🔍 Търсене -->
<form method="get" asp-action="Index" class="text-center mb-2">
    <input type="text" name="searchString" value="@ViewData["CurrentFilter"]"
           class="form-control d-inline-block"
           placeholder="🔍 Търси по модел или марка..."
           style="max-width: 400px; margin-right: 10px;" />
    <button type="submit" class="btn btn-outline-light">Търси</button>
</form>

<!-- ⬇️ Сортиране -->
<div class="text-center mb-4">
    <a asp-action="Index" asp-route-sortOrder="price_asc" class="btn btn-outline-info me-2">⬇️ Най-евтини</a>
    <a asp-action="Index" asp-route-sortOrder="price_desc" class="btn btn-outline-info">⬆️ Най-скъпи</a>
</div>

<!-- Стилизиране -->
<style>
    .bike-list {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
    }

    .bike-card {
        background-color: #1e1e1e;
        padding: 20px;
        border-radius: 8px;
        width: 250px;
        text-align: center;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
    }

        .bike-card img {
            width: 100%;
            height: auto;
        }

    .bike-name, .bike-price {
        color: #ff6f00;
    }

    .add-to-cart-btn {
        background-color: #ff6f00;
        padding: 10px;
        border: none;
        color: white;
        width: 100%;
        border-radius: 5px;
        cursor: pointer;
    }

        .add-to-cart-btn:hover {
            background-color: #ff4500;
        }
</style>



<!-- 🏍️ Нов изглед с карти (до 3 в ред) -->
<div class="container mt-4">
    <div class="row justify-content-center">
        @foreach (var bike in Model)
        {
            <div class="col-xl-4 col-md-6 col-sm-12 mb-4 d-flex">
                <div class="card bike-card text-white bg-dark border border-warning rounded-4 w-100">
                    <img src="@bike.ImageUrl" class="card-img-top p-2" alt="@bike.Model" />
                    <div class="card-body text-center d-flex flex-column justify-content-between">
                        <h5 class="card-title">@bike.Manufacturer @bike.Model</h5>
                        <p class="text-orange fw-bold fs-5">@string.Format("{0:N2} лв.", bike.Price)</p>
                        <p class="card-text small">@bike.Description</p>

                        <div class="d-flex justify-content-center gap-3 my-2">
                            <span class="animated-icon">💨 @bike.Horsepower HP</span>
                            <span class="animated-icon">⚡ @bike.TopSpeed km/h</span>
                        </div>

                        <a asp-action="Details" asp-route-id="@bike.Id" class="btn btn-warning mt-auto">Виж повече</a>

                        @if (SignInManager.IsSignedIn(User) && User.IsInRole("Admin"))
                        {
                            <div class="d-flex justify-content-center gap-2 mt-2">
                                <a asp-action="Edit" asp-route-id="@bike.Id" class="btn btn-outline-warning btn-sm">🖊️ Редактирай</a>
                                <a asp-action="Delete" asp-route-id="@bike.Id" class="btn btn-outline-danger btn-sm">✖️ Изтрий</a>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
</div>